# Сервис объявлений на FastAPI

Это учебный проект сервиса для управления объявлениями, разработанный на FastAPI с использованием PostgreSQL в качестве базы данных и докеризацией для простоты развертывания.

## Возможности

*   Создание объявлений (заголовок, описание, цена, автор)
*   Получение объявления по ID
*   Поиск объявлений по различным параметрам (заголовок, автор, цена)
*   Обновление существующих объявлений
*   Удаление объявлений

## Технологии

*   Python 3.11+
*   FastAPI
*   SQLAlchemy (асинхронный режим с `asyncpg`)
*   Pydantic (для валидации данных)
*   PostgreSQL
*   Docker & Docker Compose
*   Uvicorn (ASGI сервер)

## Подготовка к запуску

Перед запуском проекта убедитесь, что у вас установлены:

*   [Docker](https://www.docker.com/get-started)
*   [Docker Compose](https://docs.docker.com/compose/install/) (обычно идет вместе с Docker Desktop)

## Запуск проекта (с использованием Docker Compose)

Предполагается, что вы уже получили исходный код проекта (например, склонировали репозиторий) и находитесь в корневой папке проекта.

1.  **Настройте переменные окружения:**
    В корневой папке проекта должен присутствовать файл `.env`. Создайте его, если он отсутствует, взяв за основу `.env.example`.
    Убедитесь, что переменные в файле `.env` сконфигурированы корректно для вашего окружения. Для запуска с Docker Compose значение `POSTGRES_SERVER` должно быть `db` (имя сервиса базы данных в `docker-compose.yml`). Остальные значения (например, `POSTGRES_USER`, `POSTGRES_PASSWORD`, `POSTGRES_DB`) должны соответствовать тем, что ожидает сервис PostgreSQL.

2.  **Соберите образы и запустите контейнеры:**
    Выполните следующую команду в корневой папке проекта:
    ```bash
    docker-compose up --build
    ```
    Эта команда соберет Docker-образ для FastAPI приложения (если он еще не собран или изменился `Dockerfile`) и запустит контейнеры для приложения и базы данных PostgreSQL.
    Параметр `--build` нужен при первом запуске или если вы вносили изменения в `Dockerfile`. Для последующих запусков достаточно `docker-compose up`.

3.  **Проверка:**
    *   Приложение будет доступно по адресу `http://127.0.0.1:8000`.
    *   Интерактивная документация API (Swagger UI) доступна по адресу `http://127.0.0.1:8000/docs`.
    *   Альтернативная документация (ReDoc) доступна по адресу `http://127.0.0.1:8000/redoc`.

    При первом запуске таблицы в базе данных будут созданы автоматически.

## Остановка проекта

Чтобы остановить запущенные контейнеры, нажмите `Ctrl+C` в терминале, где выполняется `docker-compose up`.
Затем, чтобы полностью остановить и удалить контейнеры, выполните:
```bash
docker-compose down